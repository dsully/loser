(function(f){function d(au,K,L){var z=[],S={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},threshold:null,grid:{color:"#545454",backgroundColor:null,tickColor:"#dddddd",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},selection:{mode:null,color:"#e8cfac"},crosshair:{mode:null,color:"#aa0000"},shadowSize:3},A=null,av=null,aw=null,M=null,aD=null,m=f(au),ae={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},Q={left:0,right:0,top:0,bottom:0},an=0,C=0,q=0,af=0,u={};this.setData=R;this.setupGrid=W;this.draw=aA;this.clearSelection=j;this.setSelection=ah;this.getCanvas=function(){return A};this.getPlotOffset=function(){return Q};this.getData=function(){return z};this.getAxes=function(){return ae};this.setCrosshair=ag;this.clearCrosshair=function(){ag(null)};this.highlight=ay;this.unhighlight=am;ac(L);R(K);O();W();aA();function R(aE){z=w(aE);H();X()}function w(aI){var aG=[];for(var aF=0;aF<aI.length;++aF){var aH;if(aI[aF].data){aH={};for(var aE in aI[aF]){aH[aE]=aI[aF][aE]}}else{aH={data:aI[aF]}}aG.push(aH)}return aG}function ac(aE){f.extend(true,S,aE);if(S.grid.borderColor==null){S.grid.borderColor=S.grid.color}if(S.xaxis.noTicks&&S.xaxis.ticks==null){S.xaxis.ticks=S.xaxis.noTicks}if(S.yaxis.noTicks&&S.yaxis.ticks==null){S.yaxis.ticks=S.yaxis.noTicks}if(S.grid.coloredAreas){S.grid.markings=S.grid.coloredAreas}if(S.grid.coloredAreasColor){S.grid.markingsColor=S.grid.coloredAreasColor}}function H(){var aJ;var aO=z.length,aE=[],aH=[];for(aJ=0;aJ<z.length;++aJ){var aN=z[aJ].color;if(aN!=null){--aO;if(typeof aN=="number"){aH.push(aN)}else{aE.push(e(z[aJ].color))}}}for(aJ=0;aJ<aH.length;++aJ){aO=Math.max(aO,aH[aJ]+1)}var aF=[],aI=0;aJ=0;while(aF.length<aO){var aM;if(S.colors.length==aJ){aM=new g(100,100,100)}else{aM=e(S.colors[aJ])}var aG=aI%2==1?-1:1;var aL=1+aG*Math.ceil(aI/2)*0.2;aM.scale(aL,aL,aL);aF.push(aM);++aJ;if(aJ>=S.colors.length){aJ=0;++aI}}var aK=0,aP;for(aJ=0;aJ<z.length;++aJ){aP=z[aJ];if(aP.color==null){aP.color=aF[aK].toString();++aK}else{if(typeof aP.color=="number"){aP.color=aF[aP.color].toString()}}aP.lines=f.extend(true,{},S.lines,aP.lines);aP.points=f.extend(true,{},S.points,aP.points);aP.bars=f.extend(true,{},S.bars,aP.bars);if(aP.lines.show==null&&!aP.bars.show&&!aP.points.show){aP.lines.show=true}if(aP.shadowSize==null){aP.shadowSize=S.shadowSize}if(!aP.xaxis){aP.xaxis=ae.xaxis}if(aP.xaxis==1){aP.xaxis=ae.xaxis}else{if(aP.xaxis==2){aP.xaxis=ae.x2axis}}if(!aP.yaxis){aP.yaxis=ae.yaxis}if(aP.yaxis==1){aP.yaxis=ae.yaxis}else{if(aP.yaxis==2){aP.yaxis=ae.y2axis}}if(!aP.threshold){aP.threshold=S.threshold}aP.subseries=null}}function X(){var aV=Number.POSITIVE_INFINITY,aN=Number.NEGATIVE_INFINITY,aE,a2,aZ,aX,aU,aQ;for(aE in ae){ae[aE].datamin=aV;ae[aE].datamax=aN;ae[aE].min=S[aE].min;ae[aE].max=S[aE].max;ae[aE].used=false}for(a2=0;a2<z.length;++a2){aQ=z[a2];aQ.datapoints={points:[],incr:2};var a6=aQ.data,a1=aQ.datapoints.points,aK=aQ.xaxis,aJ=aQ.yaxis,aR=aV,aT=aN,aW=aV,a4=aN,aM,aL,aS,a0,a3=[];if(aQ.bars.show){aQ.datapoints.incr=3;a3.push({d:0})}aK.used=aJ.used=true;a0=aQ.datapoints.incr;for(aZ=aX=0;aZ<a6.length;++aZ,aX+=a0){aS=a6[aZ];aM=null;aL=null;if(a6[aZ]!=null){aM=aS[0];aL=aS[1]}if(aM!=null&&!isNaN(aM=+aM)){if(aM<aR){aR=aM}if(aM>aT){aT=aM}}else{aM=null}if(aL!=null&&!isNaN(aL=+aL)){if(aL<aW){aW=aL}if(aL>a4){a4=aL}}else{aL=null}if(aM==null||aL==null){aM=aL=null}for(aU=2;aU<a0;++aU){a1[aX+aU]=aS[aU]==null?a3[aU-2].d:aS[aU]}a1[aX+1]=aL;a1[aX]=aM}if(aQ.bars.show){var a5=aQ.bars.align=="left"?0:-aQ.bars.barWidth/2;if(aQ.bars.horizontal){aW+=a5;a4+=a5+aQ.bars.barWidth}else{aR+=a5;aT+=a5+aQ.bars.barWidth}}aK.datamin=Math.min(aK.datamin,aR);aK.datamax=Math.max(aK.datamax,aT);aJ.datamin=Math.min(aJ.datamin,aW);aJ.datamax=Math.max(aJ.datamax,a4);if(aQ.lines.show&&aQ.lines.steps){aS=[];for(aZ=aX=0;aZ<a1.length;aZ+=a0,aX+=a0){aM=a1[aZ];aL=a1[aZ+1];if(aZ>0&&a1[aZ-a0]!=null&&aM!=null&&a1[aZ-a0+1]!=aL){aS[aX]=aM;aS[aX+1]=a1[aZ-a0+1];aX+=a0}aS[aX]=aM;aS[aX+1]=aL}aQ.datapoints.linespoints=aS}if(aQ.threshold){var aF=f.extend({},aQ),aO=f.extend({},aQ);aF.datapoints={points:[],incr:a0};aO.datapoints={points:[],incr:a0};aO.color=aQ.threshold.color;var aP=aQ.threshold.below,aG=aF.datapoints.points,aH=aO.datapoints.points;for(aZ=0;aZ<a1.length;aZ+=a0){aM=a1[aZ];aL=a1[aZ+1];if(aL<aP){aS=aH}else{aS=aG}aS.push(aM);aS.push(aL);for(aU=2;aU<a0;++aU){aS.push(a1[aZ+aU])}}if(aQ.lines.show){var aI=aQ.datapoints.linespoints||a1;aG=[];aH=[];aS=aG;for(aZ=0;aZ<aI.length;aZ+=a0){aM=aI[aZ];aL=aI[aZ+1];var aY=aS;if(aL!=null){if(aL<aP){aS=aH}else{aS=aG}}if(aS!=aY&&aM!=null&&aZ>0&&aI[aZ-a0]!=null){aX=(aM-aI[aZ-a0])/(aL-aI[aZ-a0+1])*(aP-aL)+aM;aY.push(aX);aY.push(aP);aS.push(null);aS.push(null);aS.push(aX);aS.push(aP)}aS.push(aM);aS.push(aL)}aF.datapoints.linespoints=aG;aO.datapoints.linespoints=aH}aQ.subseries=[aF,aO]}}}function O(){function aE(aG,aF){var aH=document.createElement("canvas");aH.width=aG;aH.height=aF;if(f.browser.msie){aH=window.G_vmlCanvasManager.initElement(aH)}return aH}an=m.width();C=m.height();m.html("");if(m.css("position")=="static"){m.css("position","relative")}if(an<=0||C<=0){throw"Invalid dimensions for plot, width = "+an+", height = "+C}if(f.browser.msie){window.G_vmlCanvasManager.init_(document)}A=f(aE(an,C)).appendTo(m).get(0);M=A.getContext("2d");av=f(aE(an,C)).css({position:"absolute",left:0,top:0}).appendTo(m).get(0);aD=av.getContext("2d");aw=f([av,A]);if(S.selection.mode!=null||S.crosshair.mode!=null||S.grid.hoverable){aw.each(function(){this.onmousemove=k});if(S.selection.mode!=null){aw.mousedown(at)}}if(S.crosshair.mode!=null){aw.mouseout(p)}if(S.grid.clickable){aw.click(P)}}function W(){function aE(aH,aG){t(aH,aG);n(aH,aG);aa(aH,aG);if(aH==ae.xaxis||aH==ae.x2axis){aH.p2c=function(aI){return(aI-aH.min)*aH.scale};aH.c2p=function(aI){return aH.min+aI/aH.scale}}else{aH.p2c=function(aI){return(aH.max-aI)*aH.scale};aH.c2p=function(aI){return aH.max-aI/aH.scale}}}for(var aF in ae){aE(ae[aF],S[aF])}aC();T();aB()}function t(aH,aJ){var aG=aJ.min!=null?+aJ.min:aH.datamin,aE=aJ.max!=null?+aJ.max:aH.datamax;if(aG==Number.POSITIVE_INFINITY){aG=0}if(aE==Number.NEGATIVE_INFINITY){aE=1}if(aE-aG==0){var aF=aE==0?1:0.01;if(aJ.min==null){aG-=aF}if(aJ.max==null||aJ.min!=null){aE+=aF}}else{var aI=aJ.autoscaleMargin;if(aI!=null){if(aJ.min==null){aG-=(aE-aG)*aI;if(aG<0&&aH.datamin>=0){aG=0}}if(aJ.max==null){aE+=(aE-aG)*aI;if(aE>0&&aH.datamax<=0){aE=0}}}}aH.min=aG;aH.max=aE}function n(aJ,aM){var aI;if(typeof aM.ticks=="number"&&aM.ticks>0){aI=aM.ticks}else{if(aJ==ae.xaxis||aJ==ae.x2axis){aI=an/100}else{aI=C/60}}var aR=(aJ.max-aJ.min)/aI;var aT,aN,aP,aQ,aL,aG,aF;if(aM.mode=="time"){var aO={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aS=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var aH=0;if(aM.minTickSize!=null){if(typeof aM.tickSize=="number"){aH=aM.tickSize}else{aH=aM.minTickSize[0]*aO[aM.minTickSize[1]]}}for(aL=0;aL<aS.length-1;++aL){if(aR<(aS[aL][0]*aO[aS[aL][1]]+aS[aL+1][0]*aO[aS[aL+1][1]])/2&&aS[aL][0]*aO[aS[aL][1]]>=aH){break}}aT=aS[aL][0];aP=aS[aL][1];if(aP=="year"){aG=Math.pow(10,Math.floor(Math.log(aR/aO.year)/Math.LN10));aF=(aR/aO.year)/aG;if(aF<1.5){aT=1}else{if(aF<3){aT=2}else{if(aF<7.5){aT=5}else{aT=10}}}aT*=aG}if(aM.tickSize){aT=aM.tickSize[0];aP=aM.tickSize[1]}aN=function(aW){var a1=[],aZ=aW.tickSize[0],a2=aW.tickSize[1],a0=new Date(aW.min);var aV=aZ*aO[a2];if(a2=="second"){a0.setUTCSeconds(c(a0.getUTCSeconds(),aZ))}if(a2=="minute"){a0.setUTCMinutes(c(a0.getUTCMinutes(),aZ))}if(a2=="hour"){a0.setUTCHours(c(a0.getUTCHours(),aZ))}if(a2=="month"){a0.setUTCMonth(c(a0.getUTCMonth(),aZ))}if(a2=="year"){a0.setUTCFullYear(c(a0.getUTCFullYear(),aZ))}a0.setUTCMilliseconds(0);if(aV>=aO.minute){a0.setUTCSeconds(0)}if(aV>=aO.hour){a0.setUTCMinutes(0)}if(aV>=aO.day){a0.setUTCHours(0)}if(aV>=aO.day*4){a0.setUTCDate(1)}if(aV>=aO.year){a0.setUTCMonth(0)}var a4=0,a3=Number.NaN,aX;do{aX=a3;a3=a0.getTime();a1.push({v:a3,label:aW.tickFormatter(a3,aW)});if(a2=="month"){if(aZ<1){a0.setUTCDate(1);var aU=a0.getTime();a0.setUTCMonth(a0.getUTCMonth()+1);var aY=a0.getTime();a0.setTime(a3+a4*aO.hour+(aY-aU)*aZ);a4=a0.getUTCHours();a0.setUTCHours(0)}else{a0.setUTCMonth(a0.getUTCMonth()+aZ)}}else{if(a2=="year"){a0.setUTCFullYear(a0.getUTCFullYear()+aZ)}else{a0.setTime(a3+aV)}}}while(a3<aW.max&&a3!=aX);return a1};aQ=function(aU,aX){var aY=new Date(aU);if(aM.timeformat!=null){return f.plot.formatDate(aY,aM.timeformat,aM.monthNames)}var aV=aX.tickSize[0]*aO[aX.tickSize[1]];var aW=aX.max-aX.min;if(aV<aO.minute){fmt="%h:%M:%S"}else{if(aV<aO.day){if(aW<2*aO.day){fmt="%h:%M"}else{fmt="%b %d %h:%M"}}else{if(aV<aO.month){fmt="%b %d"}else{if(aV<aO.year){if(aW<aO.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return f.plot.formatDate(aY,fmt,aM.monthNames)}}else{var aE=aM.tickDecimals;var aK=-Math.floor(Math.log(aR)/Math.LN10);if(aE!=null&&aK>aE){aK=aE}aG=Math.pow(10,-aK);aF=aR/aG;if(aF<1.5){aT=1}else{if(aF<3){aT=2;if(aF>2.25&&(aE==null||aK+1<=aE)){aT=2.5;++aK}}else{if(aF<7.5){aT=5}else{aT=10}}}aT*=aG;if(aM.minTickSize!=null&&aT<aM.minTickSize){aT=aM.minTickSize}if(aM.tickSize!=null){aT=aM.tickSize}aJ.tickDecimals=Math.max(0,(aE!=null)?aE:aK);aN=function(aW){var aY=[];var aZ=c(aW.min,aW.tickSize),aV=0,aU=Number.NaN,aX;do{aX=aU;aU=aZ+aV*aW.tickSize;aY.push({v:aU,label:aW.tickFormatter(aU,aW)});++aV}while(aU<aW.max&&aU!=aX);return aY};aQ=function(aU,aV){return aU.toFixed(aV.tickDecimals)}}aJ.tickSize=aP?[aT,aP]:aT;aJ.tickGenerator=aN;if(f.isFunction(aM.tickFormatter)){aJ.tickFormatter=function(aU,aV){return""+aM.tickFormatter(aU,aV)}}else{aJ.tickFormatter=aQ}if(aM.labelWidth!=null){aJ.labelWidth=aM.labelWidth}if(aM.labelHeight!=null){aJ.labelHeight=aM.labelHeight}}function aa(aI,aK){aI.ticks=[];if(!aI.used){return}if(aK.ticks==null){aI.ticks=aI.tickGenerator(aI)}else{if(typeof aK.ticks=="number"){if(aK.ticks>0){aI.ticks=aI.tickGenerator(aI)}}else{if(aK.ticks){var aJ=aK.ticks;if(f.isFunction(aJ)){aJ=aJ({min:aI.min,max:aI.max})}var aH,aE;for(aH=0;aH<aJ.length;++aH){var aF=null;var aG=aJ[aH];if(typeof aG=="object"){aE=aG[0];if(aG.length>1){aF=aG[1]}}else{aE=aG}if(aF==null){aF=aI.tickFormatter(aE,aI)}aI.ticks[aH]={v:aE,label:aF}}}}}if(aK.autoscaleMargin!=null&&aI.ticks.length>0){if(aK.min==null){aI.min=Math.min(aI.min,aI.ticks[0].v)}if(aK.max==null&&aI.ticks.length>1){aI.max=Math.min(aI.max,aI.ticks[aI.ticks.length-1].v)}}}function aC(){function aG(aJ){if(aJ.labelWidth==null){aJ.labelWidth=an/6}if(aJ.labelHeight==null){labels=[];for(i=0;i<aJ.ticks.length;++i){l=aJ.ticks[i].label;if(l){labels.push('<div class="tickLabel" style="float:left;width:'+aJ.labelWidth+'px">'+l+"</div>")}}aJ.labelHeight=0;if(labels.length>0){var aI=f('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+labels.join("")+'<div style="clear:left"></div></div>').appendTo(m);aJ.labelHeight=aI.height();aI.remove()}}}function aE(aL){if(aL.labelWidth==null||aL.labelHeight==null){var aK,aM=[],aJ;for(aK=0;aK<aL.ticks.length;++aK){aJ=aL.ticks[aK].label;if(aJ){aM.push('<div class="tickLabel">'+aJ+"</div>")}}if(aM.length>0){var aI=f('<div style="position:absolute;top:-10000px;font-size:smaller">'+aM.join("")+"</div>").appendTo(m);if(aL.labelWidth==null){aL.labelWidth=aI.width()}if(aL.labelHeight==null){aL.labelHeight=aI.find("div").height()}aI.remove()}if(aL.labelWidth==null){aL.labelWidth=0}if(aL.labelHeight==null){aL.labelHeight=0}}}aG(ae.xaxis);aE(ae.yaxis);aG(ae.x2axis);aE(ae.y2axis);var aH=S.grid.borderWidth;for(i=0;i<z.length;++i){aH=Math.max(aH,2*(z[i].points.radius+z[i].points.lineWidth/2))}Q.left=Q.right=Q.top=Q.bottom=aH;var aF=S.grid.labelMargin+S.grid.borderWidth;if(ae.xaxis.labelHeight>0){Q.bottom=Math.max(aH,ae.xaxis.labelHeight+aF)}if(ae.yaxis.labelWidth>0){Q.left=Math.max(aH,ae.yaxis.labelWidth+aF)}if(ae.x2axis.labelHeight>0){Q.top=Math.max(aH,ae.x2axis.labelHeight+aF)}if(ae.y2axis.labelWidth>0){Q.right=Math.max(aH,ae.y2axis.labelWidth+aF)}q=an-Q.left-Q.right;af=C-Q.bottom-Q.top;ae.xaxis.scale=q/(ae.xaxis.max-ae.xaxis.min);ae.yaxis.scale=af/(ae.yaxis.max-ae.yaxis.min);ae.x2axis.scale=q/(ae.x2axis.max-ae.x2axis.min);ae.y2axis.scale=af/(ae.y2axis.max-ae.y2axis.min)}function aA(){E();for(var aF=0;aF<z.length;++aF){var aG=z[aF];if(aG.subseries){for(var aE=0;aE<aG.subseries.length;++aE){ap(aG.subseries[aE])}}else{ap(aG)}}}function x(aF,aL){var aI=aL+"axis",aE=aL+"2axis",aH,aK,aJ,aG;if(aF[aI]){aH=ae[aI];aK=aF[aI].from;aJ=aF[aI].to}else{if(aF[aE]){aH=ae[aE];aK=aF[aE].from;aJ=aF[aE].to}else{aH=ae[aI];aK=aF[aL+"1"];aJ=aF[aL+"2"]}}if(aK!=null&&aJ!=null&&aK>aJ){return{from:aJ,to:aK,axis:aH}}return{from:aK,to:aJ,axis:aH}}function E(){var aI;M.save();M.clearRect(0,0,an,C);M.translate(Q.left,Q.top);if(S.grid.backgroundColor){M.fillStyle=D(S.grid.backgroundColor,af,0,"rgba(255, 255, 255, 0)");M.fillRect(0,0,q,af)}var aF=S.grid.markings;if(aF){if(f.isFunction(aF)){aF=aF({xmin:ae.xaxis.min,xmax:ae.xaxis.max,ymin:ae.yaxis.min,ymax:ae.yaxis.max,xaxis:ae.xaxis,yaxis:ae.yaxis,x2axis:ae.x2axis,y2axis:ae.y2axis})}for(aI=0;aI<aF.length;++aI){var aE=aF[aI],aK=x(aE,"x"),aH=x(aE,"y");if(aK.from==null){aK.from=aK.axis.min}if(aK.to==null){aK.to=aK.axis.max}if(aH.from==null){aH.from=aH.axis.min}if(aH.to==null){aH.to=aH.axis.max}if(aK.to<aK.axis.min||aK.from>aK.axis.max||aH.to<aH.axis.min||aH.from>aH.axis.max){continue}aK.from=Math.max(aK.from,aK.axis.min);aK.to=Math.min(aK.to,aK.axis.max);aH.from=Math.max(aH.from,aH.axis.min);aH.to=Math.min(aH.to,aH.axis.max);if(aK.from==aK.to&&aH.from==aH.to){continue}aK.from=aK.axis.p2c(aK.from);aK.to=aK.axis.p2c(aK.to);aH.from=aH.axis.p2c(aH.from);aH.to=aH.axis.p2c(aH.to);if(aK.from==aK.to||aH.from==aH.to){M.strokeStyle=aE.color||S.grid.markingsColor;M.beginPath();M.lineWidth=aE.lineWidth||S.grid.markingsLineWidth;M.moveTo(aK.from,aH.from);M.lineTo(aK.to,aH.to);M.stroke()}else{M.fillStyle=aE.color||S.grid.markingsColor;M.fillRect(aK.from,aH.to,aK.to-aK.from,aH.from-aH.to)}}}M.lineWidth=1;M.strokeStyle=S.grid.tickColor;M.beginPath();var aG,aJ=ae.xaxis;for(aI=0;aI<aJ.ticks.length;++aI){aG=aJ.ticks[aI].v;if(aG<=aJ.min||aG>=ae.xaxis.max){continue}M.moveTo(Math.floor(aJ.p2c(aG))+M.lineWidth/2,0);M.lineTo(Math.floor(aJ.p2c(aG))+M.lineWidth/2,af)}aJ=ae.yaxis;for(aI=0;aI<aJ.ticks.length;++aI){aG=aJ.ticks[aI].v;if(aG<=aJ.min||aG>=aJ.max){continue}M.moveTo(0,Math.floor(aJ.p2c(aG))+M.lineWidth/2);M.lineTo(q,Math.floor(aJ.p2c(aG))+M.lineWidth/2)}aJ=ae.x2axis;for(aI=0;aI<aJ.ticks.length;++aI){aG=aJ.ticks[aI].v;if(aG<=aJ.min||aG>=aJ.max){continue}M.moveTo(Math.floor(aJ.p2c(aG))+M.lineWidth/2,-5);M.lineTo(Math.floor(aJ.p2c(aG))+M.lineWidth/2,5)}aJ=ae.y2axis;for(aI=0;aI<aJ.ticks.length;++aI){aG=aJ.ticks[aI].v;if(aG<=aJ.min||aG>=aJ.max){continue}M.moveTo(q-5,Math.floor(aJ.p2c(aG))+M.lineWidth/2);M.lineTo(q+5,Math.floor(aJ.p2c(aG))+M.lineWidth/2)}M.stroke();if(S.grid.borderWidth){var aL=S.grid.borderWidth;M.lineWidth=aL;M.strokeStyle=S.grid.borderColor;M.strokeRect(-aL/2,-aL/2,q+aL,af+aL)}M.restore()}function T(){m.find(".tickLabels").remove();var aE=['<div class="tickLabels" style="font-size:smaller;color:'+S.grid.color+'">'];function aG(aJ,aK){for(var aI=0;aI<aJ.ticks.length;++aI){var aH=aJ.ticks[aI];if(!aH.label||aH.v<aJ.min||aH.v>aJ.max){continue}aE.push(aK(aH,aJ))}}var aF=S.grid.labelMargin+S.grid.borderWidth;aG(ae.xaxis,function(aH,aI){return'<div style="position:absolute;top:'+(Q.top+af+aF)+"px;left:"+Math.round(Q.left+aI.p2c(aH.v)-aI.labelWidth/2)+"px;width:"+aI.labelWidth+'px;text-align:center" class="tickLabel">'+aH.label+"</div>"});aG(ae.yaxis,function(aH,aI){return'<div style="position:absolute;top:'+Math.round(Q.top+aI.p2c(aH.v)-aI.labelHeight/2)+"px;right:"+(Q.right+q+aF)+"px;width:"+aI.labelWidth+'px;text-align:right" class="tickLabel">'+aH.label+"</div>"});aG(ae.x2axis,function(aH,aI){return'<div style="position:absolute;bottom:'+(Q.bottom+af+aF)+"px;left:"+Math.round(Q.left+aI.p2c(aH.v)-aI.labelWidth/2)+"px;width:"+aI.labelWidth+'px;text-align:center" class="tickLabel">'+aH.label+"</div>"});aG(ae.y2axis,function(aH,aI){return'<div style="position:absolute;top:'+Math.round(Q.top+aI.p2c(aH.v)-aI.labelHeight/2)+"px;left:"+(Q.left+q+aF)+"px;width:"+aI.labelWidth+'px;text-align:left" class="tickLabel">'+aH.label+"</div>"});aE.push("</div>");m.append(aE.join(""))}function ap(aE){if(aE.lines.show){N(aE)}if(aE.bars.show){Y(aE)}if(aE.points.show){Z(aE)}}function N(aH){function aG(aS,aT,aL,aX,aW){var aY=aS.linespoints||aS.points,aO=aS.incr,aQ=null,aP=null;M.beginPath();for(var aR=aO;aR<aY.length;aR+=aO){var aN=aY[aR-aO],aV=aY[aR-aO+1],aM=aY[aR],aU=aY[aR+1];if(aN==null||aM==null){continue}if(aV<=aU&&aV<aW.min){if(aU<aW.min){continue}aN=(aW.min-aV)/(aU-aV)*(aM-aN)+aN;aV=aW.min}else{if(aU<=aV&&aU<aW.min){if(aV<aW.min){continue}aM=(aW.min-aV)/(aU-aV)*(aM-aN)+aN;aU=aW.min}}if(aV>=aU&&aV>aW.max){if(aU>aW.max){continue}aN=(aW.max-aV)/(aU-aV)*(aM-aN)+aN;aV=aW.max}else{if(aU>=aV&&aU>aW.max){if(aV>aW.max){continue}aM=(aW.max-aV)/(aU-aV)*(aM-aN)+aN;aU=aW.max}}if(aN<=aM&&aN<aX.min){if(aM<aX.min){continue}aV=(aX.min-aN)/(aM-aN)*(aU-aV)+aV;aN=aX.min}else{if(aM<=aN&&aM<aX.min){if(aN<aX.min){continue}aU=(aX.min-aN)/(aM-aN)*(aU-aV)+aV;aM=aX.min}}if(aN>=aM&&aN>aX.max){if(aM>aX.max){continue}aV=(aX.max-aN)/(aM-aN)*(aU-aV)+aV;aN=aX.max}else{if(aM>=aN&&aM>aX.max){if(aN>aX.max){continue}aU=(aX.max-aN)/(aM-aN)*(aU-aV)+aV;aM=aX.max}}if(aN!=aQ||aV!=aP){M.moveTo(aX.p2c(aN)+aT,aW.p2c(aV)+aL)}aQ=aM;aP=aU;M.lineTo(aX.p2c(aM)+aT,aW.p2c(aU)+aL)}M.stroke()}function aI(aR,aY,aW){var aZ=aR.linespoints||aR.points,aO=aR.incr,aL=Math.min(Math.max(0,aW.min),aW.max),aU,aP=0,aX=false;for(var aQ=aO;aQ<aZ.length;aQ+=aO){var aN=aZ[aQ-aO],aV=aZ[aQ-aO+1],aM=aZ[aQ],aT=aZ[aQ+1];if(aX&&aN!=null&&aM==null){M.lineTo(aY.p2c(aP),aW.p2c(aL));M.fill();aX=false;continue}if(aN==null||aM==null){continue}if(aN<=aM&&aN<aY.min){if(aM<aY.min){continue}aV=(aY.min-aN)/(aM-aN)*(aT-aV)+aV;aN=aY.min}else{if(aM<=aN&&aM<aY.min){if(aN<aY.min){continue}aT=(aY.min-aN)/(aM-aN)*(aT-aV)+aV;aM=aY.min}}if(aN>=aM&&aN>aY.max){if(aM>aY.max){continue}aV=(aY.max-aN)/(aM-aN)*(aT-aV)+aV;aN=aY.max}else{if(aM>=aN&&aM>aY.max){if(aN>aY.max){continue}aT=(aY.max-aN)/(aM-aN)*(aT-aV)+aV;aM=aY.max}}if(!aX){M.beginPath();M.moveTo(aY.p2c(aN),aW.p2c(aL));aX=true}if(aV>=aW.max&&aT>=aW.max){M.lineTo(aY.p2c(aN),aW.p2c(aW.max));M.lineTo(aY.p2c(aM),aW.p2c(aW.max));aP=aM;continue}else{if(aV<=aW.min&&aT<=aW.min){M.lineTo(aY.p2c(aN),aW.p2c(aW.min));M.lineTo(aY.p2c(aM),aW.p2c(aW.min));aP=aM;continue}}var a0=aN,aS=aM;if(aV<=aT&&aV<aW.min&&aT>=aW.min){aN=(aW.min-aV)/(aT-aV)*(aM-aN)+aN;aV=aW.min}else{if(aT<=aV&&aT<aW.min&&aV>=aW.min){aM=(aW.min-aV)/(aT-aV)*(aM-aN)+aN;aT=aW.min}}if(aV>=aT&&aV>aW.max&&aT<=aW.max){aN=(aW.max-aV)/(aT-aV)*(aM-aN)+aN;aV=aW.max}else{if(aT>=aV&&aT>aW.max&&aV<=aW.max){aM=(aW.max-aV)/(aT-aV)*(aM-aN)+aN;aT=aW.max}}if(aN!=a0){if(aV<=aW.min){aU=aW.min}else{aU=aW.max}M.lineTo(aY.p2c(a0),aW.p2c(aU));M.lineTo(aY.p2c(aN),aW.p2c(aU))}M.lineTo(aY.p2c(aN),aW.p2c(aV));M.lineTo(aY.p2c(aM),aW.p2c(aT));if(aM!=aS){if(aT<=aW.min){aU=aW.min}else{aU=aW.max}M.lineTo(aY.p2c(aM),aW.p2c(aU));M.lineTo(aY.p2c(aS),aW.p2c(aU))}aP=Math.max(aM,aS)}if(aX){M.lineTo(aY.p2c(aP),aW.p2c(aL));M.fill()}}M.save();M.translate(Q.left,Q.top);M.lineJoin="round";var aK=aH.lines.lineWidth,aE=aH.shadowSize;if(aK>0&&aE>0){M.lineWidth=aE;M.strokeStyle="rgba(0,0,0,0.1)";var aJ=1;aG(aH.datapoints,aJ,Math.sqrt((aK/2+aE/2)*(aK/2+aE/2)-aJ*aJ),aH.xaxis,aH.yaxis);M.lineWidth=aE/2;aG(aH.datapoints,aJ,Math.sqrt((aK/2+aE/4)*(aK/2+aE/4)-aJ*aJ),aH.xaxis,aH.yaxis)}M.lineWidth=aK;M.strokeStyle=aH.color;var aF=J(aH.lines,aH.color,0,af);if(aF){M.fillStyle=aF;aI(aH.datapoints,aH.xaxis,aH.yaxis)}if(aK>0){aG(aH.datapoints,0,0,aH.xaxis,aH.yaxis)}M.restore()}function Z(aH){function aJ(aO,aN,aV,aL,aP,aT,aS){var aU=aO.points,aK=aO.incr;for(var aM=0;aM<aU.length;aM+=aK){var aR=aU[aM],aQ=aU[aM+1];if(aR==null||aR<aT.min||aR>aT.max||aQ<aS.min||aQ>aS.max){continue}M.beginPath();M.arc(aT.p2c(aR),aS.p2c(aQ)+aL,aN,0,aP,true);if(aV){M.fillStyle=aV;M.fill()}M.stroke()}}M.save();M.translate(Q.left,Q.top);var aI=aH.lines.lineWidth,aF=aH.shadowSize,aE=aH.points.radius;if(aI>0&&aF>0){var aG=aF/2;M.lineWidth=aG;M.strokeStyle="rgba(0,0,0,0.1)";aJ(aH.datapoints,aE,null,aG+aG/2,2*Math.PI,aH.xaxis,aH.yaxis);M.strokeStyle="rgba(0,0,0,0.2)";aJ(aH.datapoints,aE,null,aG/2,2*Math.PI,aH.xaxis,aH.yaxis)}M.lineWidth=aI;M.strokeStyle=aH.color;aJ(aH.datapoints,aE,J(aH.points,aH.color),0,2*Math.PI,aH.xaxis,aH.yaxis);M.restore()}function ar(aP,aO,aX,aK,aS,aH,aF,aN,aM,aW,aT){var aG,aV,aL,aR,aI,aE,aQ,aJ,aU;if(aT){aJ=aE=aQ=true;aI=false;aG=aX;aV=aP;aR=aO+aK;aL=aO+aS;if(aV<aG){aU=aV;aV=aG;aG=aU;aI=true;aE=false}}else{aI=aE=aQ=true;aJ=false;aG=aP+aK;aV=aP+aS;aL=aX;aR=aO;if(aR<aL){aU=aR;aR=aL;aL=aU;aJ=true;aQ=false}}if(aV<aN.min||aG>aN.max||aR<aM.min||aL>aM.max){return}if(aG<aN.min){aG=aN.min;aI=false}if(aV>aN.max){aV=aN.max;aE=false}if(aL<aM.min){aL=aM.min;aJ=false}if(aR>aM.max){aR=aM.max;aQ=false}aG=aN.p2c(aG);aL=aM.p2c(aL);aV=aN.p2c(aV);aR=aM.p2c(aR);if(aF){aW.beginPath();aW.moveTo(aG,aL);aW.lineTo(aG,aR);aW.lineTo(aV,aR);aW.lineTo(aV,aL);aW.fillStyle=aF(aL,aR);aW.fill()}if(aI||aE||aQ||aJ){aW.beginPath();aW.moveTo(aG,aL+aH);if(aI){aW.lineTo(aG,aR+aH)}else{aW.moveTo(aG,aR+aH)}if(aQ){aW.lineTo(aV,aR+aH)}else{aW.moveTo(aV,aR+aH)}if(aE){aW.lineTo(aV,aL+aH)}else{aW.moveTo(aV,aL+aH)}if(aJ){aW.lineTo(aG,aL+aH)}else{aW.moveTo(aG,aL+aH)}aW.stroke()}}function Y(aG){function aF(aM,aL,aO,aJ,aN,aQ,aP){var aR=aM.points,aI=aM.incr;for(var aK=0;aK<aR.length;aK+=aI){if(aR[aK]==null){continue}ar(aR[aK],aR[aK+1],aR[aK+2],aL,aO,aJ,aN,aQ,aP,M,aG.bars.horizontal)}}M.save();M.translate(Q.left,Q.top);M.lineWidth=aG.bars.lineWidth;M.strokeStyle=aG.color;var aE=aG.bars.align=="left"?0:-aG.bars.barWidth/2;var aH=aG.bars.fill?function(aI,aJ){return J(aG.bars,aG.color,aI,aJ)}:null;aF(aG.datapoints,aE,aE+aG.bars.barWidth,0,aH,aG.xaxis,aG.yaxis);M.restore()}function J(aG,aE,aF,aI){var aH=aG.fill;if(!aH){return null}if(aG.fillColor){return D(aG.fillColor,aF,aI,aE)}var aJ=e(aE);aJ.a=typeof aH=="number"?aH:0.4;aJ.normalize();return aJ.toString()}function aB(){m.find(".legend").remove();if(!S.legend.show){return}var aK=[],aI=false,aQ=S.legend.labelFormatter,aP,aM;for(i=0;i<z.length;++i){aP=z[i];aM=aP.label;if(!aM){continue}if(i%S.legend.noColumns==0){if(aI){aK.push("</tr>")}aK.push("<tr>");aI=true}if(aQ){aM=aQ(aM,aP)}aK.push('<td class="legendColorBox"><div style="border:1px solid '+S.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aP.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aM+"</td>")}if(aI){aK.push("</tr>")}if(aK.length==0){return}var aO='<table style="font-size:smaller;color:'+S.grid.color+'">'+aK.join("")+"</table>";if(S.legend.container!=null){f(S.legend.container).html(aO)}else{var aL="",aF=S.legend.position,aG=S.legend.margin;if(aG[0]==null){aG=[aG,aG]}if(aF.charAt(0)=="n"){aL+="top:"+(aG[1]+Q.top)+"px;"}else{if(aF.charAt(0)=="s"){aL+="bottom:"+(aG[1]+Q.bottom)+"px;"}}if(aF.charAt(1)=="e"){aL+="right:"+(aG[0]+Q.right)+"px;"}else{if(aF.charAt(1)=="w"){aL+="left:"+(aG[0]+Q.left)+"px;"}}var aN=f('<div class="legend">'+aO.replace('style="','style="position:absolute;'+aL+";")+"</div>").appendTo(m);if(S.legend.backgroundOpacity!=0){var aJ=S.legend.backgroundColor;if(aJ==null){var aH;if(S.grid.backgroundColor&&typeof S.grid.backgroundColor=="string"){aH=S.grid.backgroundColor}else{aH=a(aN)}aJ=e(aH).adjust(null,null,null,1).toString()}var aE=aN.children();f('<div style="position:absolute;width:'+aE.width()+"px;height:"+aE.height()+"px;"+aL+"background-color:"+aJ+';"> </div>').prependTo(aN).css("opacity",S.legend.backgroundOpacity)}}}var al={pageX:null,pageY:null},I={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false},G={pos:{x:-1,y:-1}},ak=[],s=false,r=null,ad=null;function az(aL,aJ,aG){var aR=S.grid.mouseActiveRadius,a0=aR*aR+1,a2=null,aU=false,aY,aW;for(var aY=0;aY<z.length;++aY){if(!aG(z[aY])){continue}var aS=z[aY],aK=aS.xaxis,aI=aS.yaxis,aX=aS.datapoints.points,aZ=aS.datapoints.incr,aT=aK.c2p(aL),aQ=aI.c2p(aJ),aF=aR/aK.scale,aE=aR/aI.scale;if(aS.lines.show||aS.points.show){for(aW=0;aW<aX.length;aW+=aZ){var aN=aX[aW],aM=aX[aW+1];if(aN==null){continue}if(aN-aT>aF||aN-aT<-aF||aM-aQ>aE||aM-aQ<-aE){continue}var aP=Math.abs(aK.p2c(aN)-aL),aO=Math.abs(aI.p2c(aM)-aJ),aV=aP*aP+aO*aO;if(aV<a0){a0=aV;a2=[aY,aW/aZ]}}}if(aS.bars.show&&!a2){var aH=aS.bars.align=="left"?0:-aS.bars.barWidth/2,a1=aH+aS.bars.barWidth;for(aW=0;aW<aX.length;aW+=aZ){var aN=aX[aW],aM=aX[aW+1],a3=aX[aW+2];if(aN==null){continue}if(z[aY].bars.horizontal?(aT<=Math.max(a3,aN)&&aT>=Math.min(a3,aN)&&aQ>=aM+aH&&aQ<=aM+a1):(aT>=aN+aH&&aT<=aN+a1&&aQ>=Math.min(a3,aM)&&aQ<=Math.max(a3,aM))){a2=[aY,aW/aZ]}}}}if(a2){aY=a2[0];aW=a2[1];return{datapoint:z[aY].data[aW],dataIndex:aW,series:z[aY],seriesIndex:aY}}return null}function k(aF){var aG=aF||window.event;if(aG.pageX==null&&aG.clientX!=null){var aH=document.documentElement,aE=document.body;al.pageX=aG.clientX+(aH&&aH.scrollLeft||aE.scrollLeft||0)-(aH.clientLeft||0);al.pageY=aG.clientY+(aH&&aH.scrollTop||aE.scrollTop||0)-(aH.clientTop||0)}else{al.pageX=aG.pageX;al.pageY=aG.pageY}if(S.grid.hoverable){o("plothover",al,function(aI){return aI.hoverable!=false})}if(S.crosshair.mode!=null){if(!I.active){y(G.pos,al);ab()}else{G.pos.x=-1}}if(I.active){m.trigger("plotselecting",[F()?aj():null]);aq(al)}}function at(aE){if(aE.which!=1){return}document.body.focus();if(document.onselectstart!==undefined&&u.onselectstart==null){u.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&u.ondrag==null){u.ondrag=document.ondrag;document.ondrag=function(){return false}}ax(I.first,aE);al.pageX=null;I.active=true;f(document).one("mouseup",B)}function p(aE){if(S.crosshair.mode!=null&&G.pos.x!=-1){G.pos.x=-1;ab()}}function P(aE){if(s){s=false;return}o("plotclick",aE,function(aF){return aF.clickable!=false})}function o(aF,aE,aG){var aH=aw.offset(),aM={pageX:aE.pageX,pageY:aE.pageY},aK=aE.pageX-aH.left-Q.left,aI=aE.pageY-aH.top-Q.top;if(ae.xaxis.used){aM.x=ae.xaxis.c2p(aK)}if(ae.yaxis.used){aM.y=ae.yaxis.c2p(aI)}if(ae.x2axis.used){aM.x2=ae.x2axis.c2p(aK)}if(ae.y2axis.used){aM.y2=ae.y2axis.c2p(aI)}var aN=az(aK,aI,aG);if(aN){aN.pageX=parseInt(aN.series.xaxis.p2c(aN.datapoint[0])+aH.left+Q.left);aN.pageY=parseInt(aN.series.yaxis.p2c(aN.datapoint[1])+aH.top+Q.top)}if(S.grid.autoHighlight){for(var aJ=0;aJ<ak.length;++aJ){var aL=ak[aJ];if(aL.auto==aF&&!(aN&&aL.series==aN.series&&aL.point==aN.datapoint)){am(aL.series,aL.point)}}if(aN){ay(aN.series,aN.datapoint,aF)}}m.trigger(aF,[aM,aN])}function ab(){if(!r){r=setTimeout(v,30)}}function v(){r=null;aD.save();aD.clearRect(0,0,an,C);aD.translate(Q.left,Q.top);var aH,aG;for(aH=0;aH<ak.length;++aH){aG=ak[aH];if(aG.series.bars.show){ao(aG.series,aG.point)}else{ai(aG.series,aG.point)}}if(I.show&&F()){aD.strokeStyle=e(S.selection.color).scale(null,null,null,0.8).toString();aD.lineWidth=1;M.lineJoin="round";aD.fillStyle=e(S.selection.color).scale(null,null,null,0.4).toString();var aE=Math.min(I.first.x,I.second.x),aL=Math.min(I.first.y,I.second.y),aF=Math.abs(I.second.x-I.first.x),aI=Math.abs(I.second.y-I.first.y);aD.fillRect(aE,aL,aF,aI);aD.strokeRect(aE,aL,aF,aI)}var aK=G.pos,aJ=S.crosshair.mode;if(aJ!=null&&aK.x!=-1){aD.strokeStyle=e(S.crosshair.color).scale(null,null,null,0.8).toString();aD.lineWidth=1;M.lineJoin="round";aD.beginPath();if(aJ.indexOf("x")!=-1){aD.moveTo(aK.x,0);aD.lineTo(aK.x,af)}if(aJ.indexOf("y")!=-1){aD.moveTo(0,aK.y);aD.lineTo(q,aK.y)}aD.stroke()}aD.restore()}function ay(aG,aE,aH){if(typeof aG=="number"){aG=z[aG]}if(typeof aE=="number"){aE=aG.data[aE]}var aF=U(aG,aE);if(aF==-1){ak.push({series:aG,point:aE,auto:aH});ab()}else{if(!aH){ak[aF].auto=false}}}function am(aG,aE){if(typeof aG=="number"){aG=z[aG]}if(typeof aE=="number"){aE=aG.data[aE]}var aF=U(aG,aE);if(aF!=-1){ak.splice(aF,1);ab()}}function U(aG,aH){for(var aE=0;aE<ak.length;++aE){var aF=ak[aE];if(aF.series==aG&&aF.point[0]==aH[0]&&aF.point[1]==aH[1]){return aE}}return -1}function ai(aH,aG){var aF=aG[0],aL=aG[1],aK=aH.xaxis,aJ=aH.yaxis;if(aF<aK.min||aF>aK.max||aL<aJ.min||aL>aJ.max){return}var aI=aH.points.radius+aH.points.lineWidth/2;aD.lineWidth=aI;aD.strokeStyle=e(aH.color).scale(1,1,1,0.5).toString();var aE=1.5*aI;aD.beginPath();aD.arc(aK.p2c(aF),aJ.p2c(aL),aE,0,2*Math.PI,true);aD.stroke()}function ao(aH,aE){aD.lineWidth=aH.bars.lineWidth;aD.strokeStyle=e(aH.color).scale(1,1,1,0.5).toString();var aG=e(aH.color).scale(1,1,1,0.5).toString();var aF=aH.bars.align=="left"?0:-aH.bars.barWidth/2;ar(aE[0],aE[1],aE[2]||0,aF,aF+aH.bars.barWidth,0,function(){return aG},aH.xaxis,aH.yaxis,aD,aH.bars.horizontal)}function y(aG,aE){var aF=aw.offset();aG.x=h(0,aE.pageX-aF.left-Q.left,q);aG.y=h(0,aE.pageY-aF.top-Q.top,af)}function ag(aE){if(aE==null){G.pos.x=-1}else{G.pos.x=h(0,aE.x!=null?ae.xaxis.p2c(aE.x):ae.x2axis.p2c(aE.x2),q);G.pos.y=h(0,aE.y!=null?ae.yaxis.p2c(aE.y):ae.y2axis.p2c(aE.y2),af)}ab()}function aj(){var aF=Math.min(I.first.x,I.second.x),aE=Math.max(I.first.x,I.second.x),aH=Math.max(I.first.y,I.second.y),aG=Math.min(I.first.y,I.second.y);var aI={};if(ae.xaxis.used){aI.xaxis={from:ae.xaxis.c2p(aF),to:ae.xaxis.c2p(aE)}}if(ae.x2axis.used){aI.x2axis={from:ae.x2axis.c2p(aF),to:ae.x2axis.c2p(aE)}}if(ae.yaxis.used){aI.yaxis={from:ae.yaxis.c2p(aH),to:ae.yaxis.c2p(aG)}}if(ae.y2axis.used){aI.y2axis={from:ae.y2axis.c2p(aH),to:ae.y2axis.c2p(aG)}}return aI}function V(){var aE=aj();m.trigger("plotselected",[aE]);if(ae.xaxis.used&&ae.yaxis.used){m.trigger("selected",[{x1:aE.xaxis.from,y1:aE.yaxis.from,x2:aE.xaxis.to,y2:aE.yaxis.to}])}}function B(aE){if(document.onselectstart!==undefined){document.onselectstart=u.onselectstart}if(document.ondrag!==undefined){document.ondrag=u.ondrag}I.active=false;aq(aE);if(F()){V();s=true}else{m.trigger("plotunselected",[]);m.trigger("plotselecting",[null])}return false}function ax(aF,aE){y(aF,aE);if(S.selection.mode=="y"){if(aF==I.first){aF.x=0}else{aF.x=q}}if(S.selection.mode=="x"){if(aF==I.first){aF.y=0}else{aF.y=af}}}function aq(aE){if(aE.pageX==null){return}ax(I.second,aE);if(F()){I.show=true;ab()}else{j(true)}}function j(aE){if(I.show){I.show=false;ab();if(!aE){m.trigger("plotunselected",[])}}}function ah(aF,aE){var aG;if(S.selection.mode=="y"){I.first.x=0;I.second.x=q}else{aG=x(aF,"x");I.first.x=aG.axis.p2c(aG.from);I.second.x=aG.axis.p2c(aG.to)}if(S.selection.mode=="x"){I.first.y=0;I.second.y=af}else{aG=x(aF,"y");I.first.y=aG.axis.p2c(aG.from);I.second.y=aG.axis.p2c(aG.to)}I.show=true;ab();if(!aE){V()}}function F(){var aE=5;return Math.abs(I.second.x-I.first.x)>=aE&&Math.abs(I.second.y-I.first.y)>=aE}function D(aG,aF,aK,aI){if(typeof aG=="string"){return aG}else{var aJ=M.createLinearGradient(0,aK,0,aF);for(var aH=0,aE=aG.colors.length;aH<aE;++aH){var aL=aG.colors[aH];aJ.addColorStop(aH/(aE-1),typeof aL=="string"?aL:e(aI).scale(aL.brightness,aL.brightness,aL.brightness,aL.opacity))}return aJ}}}f.plot=function(n,k,j){var m=new d(n,k,j);return m};f.plot.formatDate=function(q,j,m){var k=function(r){r=""+r;return r.length==1?"0"+r:r};var p=[];var o=false;if(m==null){m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}for(var n=0;n<j.length;++n){var s=j.charAt(n);if(o){switch(s){case"h":s=""+q.getUTCHours();break;case"H":s=k(q.getUTCHours());break;case"M":s=k(q.getUTCMinutes());break;case"S":s=k(q.getUTCSeconds());break;case"d":s=""+q.getUTCDate();break;case"m":s=""+(q.getUTCMonth()+1);break;case"y":s=""+q.getUTCFullYear();break;case"b":s=""+m[q.getUTCMonth()];break}p.push(s);o=false}else{if(s=="%"){o=true}else{p.push(s)}}}return p.join("")};function c(k,j){return j*Math.floor(k/j)}function h(k,m,j){if(m<k){return k}else{if(m>j){return j}else{return m}}}function g(q,p,k,n){var o=["r","g","b","a"];var j=4;while(-1<--j){this[o[j]]=arguments[j]||((j==3)?1:0)}this.toString=function(){if(this.a>=1){return"rgb("+[this.r,this.g,this.b].join(",")+")"}else{return"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"}};this.scale=function(t,s,u,r){j=4;while(-1<--j){if(arguments[j]!=null){this[o[j]]*=arguments[j]}}return this.normalize()};this.adjust=function(t,s,u,r){j=4;while(-1<--j){if(arguments[j]!=null){this[o[j]]+=arguments[j]}}return this.normalize()};this.clone=function(){return new g(this.r,this.b,this.g,this.a)};var m=function(s,r,t){return Math.max(Math.min(s,t),r)};this.normalize=function(){this.r=h(0,parseInt(this.r),255);this.g=h(0,parseInt(this.g),255);this.b=h(0,parseInt(this.b),255);this.a=h(0,this.a,1);return this};this.normalize()}var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};function a(k){var j,m=k;do{j=m.css("background-color").toLowerCase();if(j!=""&&j!="transparent"){break}m=m.parent()}while(!f.nodeName(m.get(0),"body"));if(j=="rgba(0, 0, 0, 0)"){return"transparent"}return j}function e(m){var j;if(j=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(m)){return new g(parseInt(j[1],10),parseInt(j[2],10),parseInt(j[3],10))}if(j=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m)){return new g(parseInt(j[1],10),parseInt(j[2],10),parseInt(j[3],10),parseFloat(j[4]))}if(j=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(m)){return new g(parseFloat(j[1])*2.55,parseFloat(j[2])*2.55,parseFloat(j[3])*2.55)}if(j=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(m)){return new g(parseFloat(j[1])*2.55,parseFloat(j[2])*2.55,parseFloat(j[3])*2.55,parseFloat(j[4]))}if(j=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(m)){return new g(parseInt(j[1],16),parseInt(j[2],16),parseInt(j[3],16))}if(j=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(m)){return new g(parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16),parseInt(j[3]+j[3],16))}var k=f.trim(m).toLowerCase();if(k=="transparent"){return new g(255,255,255,0)}else{j=b[k];return new g(j[0],j[1],j[2])}}})(jQuery);